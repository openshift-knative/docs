<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scalability and performance of OpenShift Serverless Serving :: Red Hat OpenShift Serverless previews</title>
    <link rel="canonical" href="https://openshift-knative.github.io/docs/docs/latest/serverless/serving/scaleability-and-performance-of-serving.html">
    <meta name="description" content="Scalability and performance of OpenShift Serverless Serving">
    <meta name="generator" content="Antora 3.0.3">
    <link rel="stylesheet" href="../../../../_/css/site.css">
<link rel="stylesheet" href="../../../../_/css/extra.css">
<link rel="stylesheet" href="../../../../_/css/custom.css">
<link rel="stylesheet" href="../../../../_/css/tabs.css">
<link rel="stylesheet" href="../../../../_/font-awesome-4.7.0/css/font-awesome.min.css">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <button class="navbar-burger" data-target="topbar-nav">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <img src="../../../../_/img/serverless-icon.png" class="navbar-logo" alt="OpenShift Serverless icon">
        <a href="">OpenShift Serverless - Technology and Developer Preview Releases</a>
      </div>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- search broken
        <div class="navbar-item hide-for-print">
          <script async src="https://cse.google.com/cse.js?cx=002898025167115630151:gnr5edrg2eo"></script>
          <div class="gcse-searchbox" enableAutoComplete="true"></div>
        </div>
      -->
        <a class="navbar-item" href="https://openshift-knative.github.io/docs">Home</a>
        <a class="navbar-item" href="https://developers.redhat.com/topics/serverless-architecture">Blog</a>
          <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link" href="#">Upstream Projects</a>
              <div class="navbar-dropdown">
                  <a class="navbar-item" href="https://kogito.kie.org/">Kogito</a>
                  <a class="navbar-item" href="https://knative.dev/docs/functions/">Knative Functions</a>
                  <a class="navbar-item" href="https://knative.dev/docs/eventing/">Knative Eventing</a>
              </div>
          </div>
      </div>
    </div>
  </nav>
<!-- need alt search type-->
<!--<div class="gcse-searchresults"></div>-->
</header>
<div class="main-wrapper">
  <div class="navigation-container" data-component="docs" data-version="main">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Serverless</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../serverless-architecture-diagram.html">OpenShift Serverless architecture diagram</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Using OpenShift Serverless with OpenShift Service Mesh</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../service-mesh/common-service-mesh-setup.html">Setup Serverless with OpenShift Service Mesh</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../service-mesh/common-service-mesh-network-isolation.html">Use Service Mesh to isolate network-traffic</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../service-mesh/eventing-service-mesh-containersource.html">Eventing: Using ContainerSource with OpenShift Service Mesh</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../service-mesh/eventing-service-mesh-sinkbinding.html">Eventing: Using SinkBinding with OpenShift Service Mesh</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Eventing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../eventing/transport-encryption-setup.html">Setup transport encryption in Eventing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../eventing/kafka-scaling-setup.html">Setup Autoscaling For Eventing Kafka Components</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../eventing/backstage-setup.html">Setup Backstage for Eventing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../eventing/backstage-usage.html">Knative Event Mesh Backstage Plugin</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Event Transformations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/eventtransform/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/eventtransform/jsonata.html">Event Transformations for JSON with JSONata</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">IntegrationSource</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/integrationsource/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/integrationsource/aws_ddbstreams.html">AWS DynamoDB Streams</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/integrationsource/aws_s3.html">AWS S3 Source</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/integrationsource/aws_sqs.html">AWS SQS Source</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/integrationsource/timer.html">Timer Source</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">IntegrationSink</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/integrationsink/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/integrationsink/aws_s3.html">AWS S3 Sink</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/integrationsink/aws_sns.html">AWS SNS Sink</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/integrationsink/aws_sqs.html">AWS SQS Sink</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/integrationsink/logger.html">Logger Sink</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Serving</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="serving-with-ingress-sharding.html">Use Serving with OpenShift ingress sharding</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="scaleability-and-performance-of-serving.html">Scalability and performance of OpenShift Serverless Serving</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="serving-transport-encryption.html">Serving Transport Encryption</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="serving-kourier-istio-ingresses.html">Kourier and Istio ingresses</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Functions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../functions/backstage-templates.html">Backstage Templates for Knative Functions</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Serverless Logic</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../serverless-logic/about.html">About OpenShift Serverless Logic</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../serverless-logic/release-notes.html">Release notes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">User Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/getting-started/learning-environment.html">Learning environment</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/getting-started/preparing-environment.html">Environment setup</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/getting-started/production-environment.html">Production environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/getting-started/create-your-first-workflow-service-with-kn-cli-and-vscode.html">Creating and running workflow projects using KN CLI and Visual Studio Code</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/getting-started/getting-familiar-with-our-tooling.html">Getting familiar with OpenShift Serverless Logic tooling</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Core</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/core/cncf-serverless-workflow-specification-support.html">Serverless Workflow Specification</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/core/handling-events-on-workflows.html">Events</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/core/working-with-callbacks.html">Callbacks</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/core/understanding-jq-expressions.html">jq Expressions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/core/understanding-workflow-error-handling.html">Error handling</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/core/configuration-properties.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/core/defining-an-input-schema-for-workflows.html">Input Schema</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/core/custom-functions-support.html">Custom functions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/core/timeouts-support.html">Timeouts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/core/working-with-parallelism.html">Parallelism</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Tooling</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../serverless-logic/tooling/serverless-workflow-editor/swf-editor-overview.html">Editor</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/tooling/serverless-workflow-editor/swf-editor-vscode-extension.html">VS Code extension</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/tooling/serverless-workflow-editor/swf-editor-chrome-extension.html">Chrome extension for GitHub</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../serverless-logic/tooling/serverless-logic-web-tools/serverless-logic-web-tools-overview.html">Serverless Logic Web Tools</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/tooling/serverless-logic-web-tools/serverless-logic-web-tools-github-integration.html">Integration with GitHub</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/tooling/serverless-logic-web-tools/serverless-logic-web-tools-openshift-integration.html">Integration with OpenShift</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/tooling/serverless-logic-web-tools/serverless-logic-web-tools-redhat-application-services-integration.html">Red Hat OpenShift Application and Data Services integration</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/tooling/serverless-logic-web-tools/serverless-logic-web-tools-deploy-projects.html">Deployment</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Service Orchestration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../serverless-logic/service-orchestration/orchestration-of-openapi-based-services.html">Orchestrating the OpenAPI services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/service-orchestration/configuring-openapi-services-endpoints.html">Configuring the OpenAPI services endpoints</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/service-orchestration/working-with-openapi-callbacks.html">OpenAPI callbacks in OpenShift Serverless Logic</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/service-orchestration/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Event Orchestration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/eventing/orchestration-of-asyncapi-based-services.html">Orchestrating AsyncAPI Services</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/eventing/event-correlation-with-workflows.html">Event Correlation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/security/authention-support-for-openapi-services.html">Authentication for OpenAPI services</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/security/orchestrating-third-party-services-with-oauth2.html">Orchestration of third-party services using OAuth 2.0 authentication</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Executing, Testing and Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <span class="nav-text">Executing and Testing Workflows</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../serverless-logic/testing-and-troubleshooting/quarkus-dev-ui-extension/quarkus-dev-ui-overview.html">Developer UI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/testing-and-troubleshooting/quarkus-dev-ui-extension/quarkus-dev-ui-workflow-instances-page.html">Workflow Instances</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/testing-and-troubleshooting/quarkus-dev-ui-extension/quarkus-dev-ui-workflow-definition-page.html">Workflow Definitions</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/testing-and-troubleshooting/quarkus-dev-ui-extension/quarkus-dev-ui-monitoring-page.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/testing-and-troubleshooting/quarkus-dev-ui-extension/quarkus-dev-ui-custom-dashboard-page.html">Dashboards</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/testing-and-troubleshooting/kn-plugin-workflow-overview.html">Command Line</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Persistence</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/persistence/core-concepts.html">Core concepts</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../serverless-logic/cloud/index.html">Cloud</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/cloud/custom-ingress-authz.html">Securing Workflows</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <span class="nav-text">Operator</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/install-serverless-operator.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Upgrade</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/upgrade-serverless-operator/upgrade_1_34_0_to_1_35_0.html">OSL 1.34.0 to 1.35.0</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/upgrade-serverless-operator/upgrade_1_35_0_to_1_36_0.html">OSL 1.35.0 to 1.36.0</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/upgrade-serverless-operator/upgrade_1_36_0_to_1_37_0.html">OSL 1.36.0 to 1.37.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/global-configuration.html">Admin Configuration</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/developing-workflows.html">Development Mode</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/referencing-resource-files.html">Referencing Workflow Resources</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/configuring-workflows.html">Workflow Configuration</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/build-and-deploy-workflows.html">Building and Deploying Workflow Images</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/supporting-services.html">Deploy Supporting Services</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/workflow-status-conditions.html">Custom Resource Status</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/building-custom-images.html">Building Custom Images</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/customize-podspec.html">Custom Workflow PodSpec</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/service-discovery.html">Service Discovery</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/using-persistence.html">Using persistence</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/configuring-knative-eventing-resources.html">Knative Eventing</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/add-custom-ca-to-a-workflow-pod.html">Add Custom CA to Workflow Pod</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/cloud/operator/known-issues.html">Roadmap and Known Issues</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../serverless-logic/integrations/core-concepts.html">Introduction</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Supporting Services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <span class="nav-text">Jobs Service</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/job-services/core-concepts.html">Core Concepts</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <span class="nav-text">Data Index</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/data-index/data-index-core-concepts.html">Core Concepts</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../serverless-logic/data-index/data-index-service.html">Data Index Standalone Service</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Use Cases</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/index.html">Development of OpenShift Serverless Logic applications using Quarkus and Java</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/getting-started/create-your-first-workflow-service.html">Creating a Quarkus Workflow service</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/getting-started/create-your-first-workflow-project.html">Creating a Quarkus Workflow project</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/getting-started/build-workflow-image-with-quarkus-cli.html">Building workflow images using Quarkus CLI</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/getting-started/working-with-serverless-workflow-quarkus-examples.html">Working with OpenShift Serverless Logic example applications</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/getting-started/test-serverless-workflow-quarkus-examples.html">Testing images of OpenShift Serverless Logic example applications using Quarkus CLI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Deployment</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/deployments/deploying-on-minikube.html">Deploying on Minikube</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/deployments/deploying-on-kubernetes.html">Deploying on Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/deployments/deploying-on-openshift.html">Deploying on OpenShift</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Persistence</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/persistence/persistence-core-concepts.html">Core Concepts</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/persistence/persistence-with-postgresql.html">Running a Quarkus Workflow Application using PostgreSQL</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/persistence/postgresql-advanced-concepts.html">Postgresql Advanced Concepts</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/persistence/postgresql-flyway-migration.html">PostgreSQL Database Migration</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/persistence/integration-tests-with-postgresql.html">OpenShift Serverless Logic integration test using PostgreSQL</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Data Index</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/data-index/data-index-as-quarkus-dev-service.html">Data Index as a Quarkus Development service</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/data-index/data-index-usecase-singleton.html">Deploying Data Index and OpenShift Serverless Logic application on Minikube</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/data-index/data-index-usecase-multi.html">Deploying Data Index and multiple OpenShift Serverless Logic applications on Minikube</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/data-index/data-index-quarkus-extension.html">Data Index Quarkus extensions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Service Orchestration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/service-orchestration/configuring-openapi-services-endpoints-with-quarkus.html">Configuring the OpenAPI services endpoints in different environments</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/service-orchestration/orchestration-of-grpc-services.html">Orchestrating gRPC based Services</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Service Discovery</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/service-discovery/kubernetes-service-discovery.html">Kubernetes service discovery in OpenShift Serverless Logic</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Event Orchestration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/event-orchestration/consume-produce-events-with-knative-eventing.html">Consuming and producing events on Knative Eventing in Quarkus</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/event-orchestration/consume-producing-events-with-kafka.html">Consuming and producing events using Apache Kafka in Quarkus</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/event-orchestration/orchestration-based-saga-pattern.html">Saga orchestration example in OpenShift Serverless Logic</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/event-orchestration/newsletter-subscription-example.html">Newsletter subscription example in OpenShift Serverless Logic</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Timeouts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/timeouts/timeout-showcase-example.html">Timeouts Showcase in OpenShift Serverless Logic</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Callbacks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/callbacks/callback-state-example.html">Example of OpenShift Serverless Logic application using callback state with Quarkus</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Integrations of external services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/integrations/camel-routes-integration.html">Integrating with Camel routes</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/integrations/custom-functions-knative.html">Invoking Knative services from OpenShift Serverless Logic</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/integrations/expose-metrics-to-prometheus.html">Exposing Workflow base metrics to Prometheus</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/integrations/serverless-dashboard-with-runtime-data.html">Displaying Workflow Data in Dashboards</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/testing/basic-integration-tests-with-restassured.html">Testing your Quarkus Workflow Application using REST Assured</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/testing/mocking-http-cloudevents-with-wiremock.html">Mocking HTTP CloudEvents sink using WireMock</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../serverless-logic/use-cases/advanced-developer-use-cases/testing/mocking-openapi-services-with-wiremock.html">Mocking OpenAPI services using WireMock</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Buildpacks for Serverless Functions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../functions/serverless-functions-about.html">About buildpacks for OpenShift Serverless Functions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../functions/serverless-functions-buildpacks.html">Building and deploying functions on the cluster</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Documentation</span>
    <span class="version">main</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Documentation</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../../index.html">main</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <div class="main-view-and-toolbar">
    <div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../../index.html">Documentation</a></li>
    <li class="crumb">Serverless</li>
    <li class="crumb">Serving</li>
    <li class="crumb"><a href="scaleability-and-performance-of-serving.html">Scalability and performance of OpenShift Serverless Serving</a></li>
  </ul>
</nav>
</div>
    <div class="main-view-and-toc">
        <main class="main">
          <article class="doc">
<h1>Scalability and performance of OpenShift Serverless Serving</h1>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OpenShift Serverless consists of several different components which have different resource requirements and scaling behaviours.
As some components, like the <code>controller</code> pods, are responsible to watch and react to <code>CustomResources</code> and continuously reconfigure the system, these components are called control-plane.
Other components, like OpenShift Serverless Servings <code>activator</code> component, are directly involved in requests and response handling. These components are called data-plane.
All of these components are horizontally and vertically scalable, but their resource requirements and configuration highly depends on the actual use-case.</p>
</div>
<div class="paragraph">
<p>Thus, the following paragraphs are outlining a few relevant things to consider while scaling the system to handle increased usage.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_test_context"><a class="anchor" href="#_test_context"></a>Test context</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following metrics and findings were recorded using the following test setup:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A cluster running OpenShift version 4.13</p>
</li>
<li>
<p>The cluster running <strong>4 worker nodes</strong> in AWS with a machine type of <code>m6.xlarge</code></p>
</li>
<li>
<p>OpenShift Serverless version 1.30</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Please note, that the tests are continuously run on our continuous integration system to compare performance data
between releases of OpenShift Serverless.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overhead_of_openshift_serverless_serving"><a class="anchor" href="#_overhead_of_openshift_serverless_serving"></a>Overhead of OpenShift Serverless Serving</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As components of OpenShift Serverless Serving are part of the data-plane, requests from clients are routed through:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The ingress-gateway (Kourier or Service Mesh)</p>
</li>
<li>
<p>The <code>activator</code> component</p>
</li>
<li>
<p>The <code>queue-proxy</code> sidecar container in each Knative Service</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As these components introduce an additional hop in networking and do some additional work (like for example adding observability and request queuing),
they come with some overhead. The following latency overheads have been measured:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Each additional network hop <strong>adds 0.5-1ms</strong> latency to a request. Note that the <code>activator</code> component is not always part of the data-plane depending on the current load of the Knative Service and if the Knative Service was scaled to zero before the request or not.</p>
</li>
<li>
<p>Depending on the payload size, each of those component consumes up to 1 vCPU of CPU for handling 2500 requests per second.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_known_limitations_of_openshift_serverless_serving"><a class="anchor" href="#_known_limitations_of_openshift_serverless_serving"></a>Known limitations of OpenShift Serverless Serving</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The maximum number of Knative Services that can be created using this configuration is <strong>3,000</strong>.
This corresponds to the OpenShift Container Platform Kubernetes services limit of 10,000, since 1 Knative Service creates 3 Kubernetes services.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scalability_and_performance_of_openshift_serverless_serving"><a class="anchor" href="#_scalability_and_performance_of_openshift_serverless_serving"></a>Scalability and performance of OpenShift Serverless Serving</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OpenShift Serverless Serving has to be scaled and configured based on the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Number of Knative Services</p>
</li>
<li>
<p>Number of Revisions</p>
</li>
<li>
<p>Amount of concurrent requests in the system</p>
</li>
<li>
<p>Size of payloads of the requests</p>
</li>
<li>
<p>The startup-latency and response latency of the Knative Service added by the user&#8217;s web application</p>
</li>
<li>
<p>Number of changes of the KnativeService <code>CustomResources</code> over time</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Scaling of OpenShift Serverless Serving is configured using the <code>KnativeServing</code> <code>CustomResource</code>.</p>
</div>
<div class="sect2">
<h3 id="_knativeserving_defaults"><a class="anchor" href="#_knativeserving_defaults"></a><code>KnativeServing</code> defaults</h3>
<div class="paragraph">
<p>Per default, OpenShift Serverless Serving is configured to run all components with high availability and with medium-sized CPU and memory requests/limits.
This also means, that the <code>high-available</code> field in <code>KnativeServing</code> is automatically set to a value of 2 and all system components are scaled to two relicas.
This set-up is suitable for medium-sized workload scenarios. These defaults have been tested with</p>
</div>
<div class="ulist">
<ul>
<li>
<p>170 Knative Services</p>
</li>
<li>
<p>1-2 Revisions per Knative Service</p>
</li>
<li>
<p>89 test scenarios mainly focussed on testing the control-plane</p>
</li>
<li>
<p>48 re-creating scenarios where Knative Services are deleted and re-created</p>
</li>
<li>
<p>41 stable scenarios, in which requests are slowly but continuously sent to the system</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>During these test cases, the system components effectively consumed:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">Measured resources</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operator in project <code>openshift-serverless</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 GB Memory, 0.2 Cores of CPU</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Serving components in project <code>knative-serving</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 GB Memory, 2.5 Cores of CPU</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>While the default set-up is suitable for medium-sized workloads, this might be over-sized for smaller set-ups or under-sized for high-workload scenarios.
Please see the next sections for possible tuning options.</p>
</div>
</div>
<div class="sect2">
<h3 id="_minimal_requirements"><a class="anchor" href="#_minimal_requirements"></a>Minimal requirements</h3>
<div class="paragraph">
<p>To configure OpenShift Serverless Serving for a minimal workload scenario, it is important to know the idle consumption of the system components.</p>
</div>
<div class="sect3">
<h4 id="_idle_consumption"><a class="anchor" href="#_idle_consumption"></a>Idle consumption</h4>
<div class="paragraph">
<p>The idle consumption is dependent on the number of Knative Services.
Please note, that for the idle consumption, only Memory is important.
Relevant cycles of CPU are only used when Knative Services are changed or requests are sent to/from them.
The following memory consumptions have been measured for the components in the <code>knative-serving</code> and <code>knative-serving-ingress</code> OpenShift projects:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">0 Services</th>
<th class="tableblock halign-left valign-top">100 Services</th>
<th class="tableblock halign-left valign-top">500 Service</th>
<th class="tableblock halign-left valign-top">1000 Services</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">activator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">55Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">86Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">150Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">200Mi</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">autoscaler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">52Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">102Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">225Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">350Mi</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">controller</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">135Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">250Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">400Mi</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">webhook</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60Mi</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3scale-kourier-gateway (1)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">190Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">330Mi</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net-kourier-controller (1)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">90Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">170Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">340Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">430Mi</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">istio-ingressgateway (1)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">57Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">107Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">307Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">446Mi</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net-istio-controller (1)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">152Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">350Mi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">504Mi</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>(1) Note: either <code>3scale-kourier-gateway</code> + <code>net-kourier-controller</code> or <code>istio-ingressgateway</code> + <code>net-istio-controller</code> are installed</p>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_openshift_serverless_serving_for_minimal_workloads"><a class="anchor" href="#_configuring_openshift_serverless_serving_for_minimal_workloads"></a>Configuring OpenShift Serverless Serving for minimal workloads</h4>
<div class="paragraph">
<p>To configure OpenShift Serverless Serving for minimal workloads, you can tune the <code>KnativeServing</code> <code>CustomResource</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: operator.knative.dev/v1beta1
kind: KnativeServing
metadata:
  name: knative-serving
  namespace: knative-serving
spec:
  high-availability:
    replicas: 1 <i class="conum" data-value="1"></i><b>(1)</b>

  workloads:
    - name: activator
      replicas: 2 <i class="conum" data-value="2"></i><b>(2)</b>
      resources:
        - container: activator
          requests:
            cpu: 250m <i class="conum" data-value="3"></i><b>(3)</b>
            memory: 60Mi <i class="conum" data-value="4"></i><b>(4)</b>
          limits:
            cpu: 1000m
            memory: 600Mi

    - name: controller
      replicas: 1 <i class="conum" data-value="6"></i><b>(6)</b>
      resources:
        - container: controller
          requests:
            cpu: 10m
            memory: 100Mi <i class="conum" data-value="4"></i><b>(4)</b>
          limits: <i class="conum" data-value="5"></i><b>(5)</b>
            cpu: 200m
            memory: 300Mi

    - name: webhook
      replicas: 1 <i class="conum" data-value="6"></i><b>(6)</b>
      resources:
        - container: webhook
          requests:
            cpu: 100m <i class="conum" data-value="7"></i><b>(7)</b>
            memory: 20Mi <i class="conum" data-value="4"></i><b>(4)</b>
          limits:
            cpu: 200m
            memory: 200Mi

  podDisruptionBudgets: <i class="conum" data-value="8"></i><b>(8)</b>
    - name: activator-pdb
      minAvailable: 1
    - name: webhook-pdb
      minAvailable: 1</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Setting this to 1 will scale all system components to one replica.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Activator should always be scaled to a minimum of two instances to avoid downtime.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Activator CPU requests should not be set lower than 250m, as a <code>HorizontalPodAutoscaler</code> will use this as a reference to scale up and down.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Adjust memory requests to the idle values from above. Also adjust memory limits according to your expected load (this might need custom testing to find the best values).</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>These limits are sufficient for a minimal-workload scenario, but they also might need adjustments depending on your concrete workload.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>One webhook and one controller are sufficient for a minimal-workload scenario</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Webhook CPU requests should not be set lower than 100m, as a <code>HorizontalPodAutoscaler</code> will use this as a reference to scale up and down.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Adjust the <code>PodDistruptionBudgets</code> to a value lower or equal to the <code>replicas</code>, to avoid problems during node maintenance.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_high_workload_configuration"><a class="anchor" href="#_high_workload_configuration"></a>High-workload configuration</h3>
<div class="paragraph">
<p>To configure OpenShift Serverless Serving for a high-workload scenario the following findings are relevant:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>These findings have been tested with requests with a payload size of 0-32kb.
The Knative Service backends used in those tests had a startup-latency between 0-10 seconds and response times between 0-5 seconds.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>All data-plane components are mostly increasing CPU usage on higher requests and/or payload scenarios, so the CPU requests and limits have to be tested and potentially increased.</p>
</li>
<li>
<p>The <code>activator</code> component also might need more memory, when it has to buffer more or bigger request payloads, so the memory requests and limits might need to be increased as well.</p>
</li>
<li>
<p>One <code>activator</code> pod can handle <strong>approximately 2500 requests per second</strong> before it starts to increase latency and, at some point, leads to errors.</p>
</li>
<li>
<p>One <code>3scale-kourier-gateway</code> or <code>istio-ingressgateway</code> pod can also handle <strong>approximately 2500 requests per second</strong> before it starts to increase latency and, at some point, leads to errors.</p>
</li>
<li>
<p>Each of the data-plane components consumes up to 1 vCPU of CPU for handling 2500 requests per second, please note that this highly depends on the payload size and the response times of the Knative Service backend.</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Please note, that <strong>fast startup</strong> and <strong>fast response-times</strong> of your Knative Service user workloads are <strong>critical</strong> for good performance of the overall system.
As OpenShift Serverless Serving components are buffering incoming requests when the Knative Service user backend is scaling-up or request concurrency has reached its capacity.
If your Knative Service user workload introduce long startup- or request-latency, at some point this will either overload the <code>activator</code> component (only if the CPU + memory configuration is too low) or leads to errors for the calling clients.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To fine-tune your OpenShift Serverless installation, use the above findings combined with your own test results to configure the <code>KnativeServing</code> <code>CustomResource</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: operator.knative.dev/v1beta1
kind: KnativeServing
metadata:
  name: knative-serving
  namespace: knative-serving
spec:
  high-availability:
    replicas: 2 <i class="conum" data-value="1"></i><b>(1)</b>

  workloads:
    - name: component-name <i class="conum" data-value="2"></i><b>(2)</b>
      replicas: 2 <i class="conum" data-value="2"></i><b>(2)</b>
      resources:
        - container: container-name
          requests:
            cpu: <i class="conum" data-value="3"></i><b>(3)</b>
            memory: <i class="conum" data-value="3"></i><b>(3)</b>
          limits:
            cpu: <i class="conum" data-value="3"></i><b>(3)</b>
            memory: <i class="conum" data-value="3"></i><b>(3)</b>

  podDisruptionBudgets: <i class="conum" data-value="4"></i><b>(4)</b>
    - name: name-of-pod-disruption-budget
      minAvailable: 1</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Set this to at least 2, to make sure you have always at least two instances of every component running. You can also use <code>workloads</code> to override the replicas for certain components.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Use the <code>workloads</code> list to configure specific components. Use the <code>deployment</code> name of the component (like <code>activator</code>, <code>autoscaler</code>, <code>autoscaler-hpa</code>, <code>controller</code>, <code>webhook</code>, <code>net-kourier-controller</code>, <code>3scale-kourier-gateway</code>, <code>net-istio-controller</code>) and set the <code>replicas</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Set the requested and limited CPU + Memory according to at least the idle consumption (see above) while also taking the above findings and your own test results into consideration.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Adjust the <code>PodDistruptionBudgets</code> to a value lower or equal to the <code>replicas</code>, to avoid problems during node maintenance. The default <code>minAvailable</code> is set to <code>1</code>, so if you increase the desired replicas, make sure to also increase <code>minAvailable</code>.</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As each environment is highly specific, it is essential to test and find your own ideal configuration.
Please use the monitoring and alerting functionality of OpenShift to continuously monitor your actual resource consumption and make adjustments if needed.</p>
</div>
<div class="paragraph">
<p>Also keep in mind, that if you are using the OpenShift Serverless and Service Mesh integration, additional CPU overhead is added by the <code>istio-proxy</code> sidecar containers.
For more information on this, see the Service Mesh documentation.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</article>
        </main>
            </div>
  </div>
</div><footer class="footer">
  <p>Adapted from Antora default UI, (c) 2019</p>
</footer>
<script src="../../../../_/js/site.js"></script>
<script src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/tabsBehavior.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
