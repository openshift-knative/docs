<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Index Core Concepts :: Red Hat OpenShift Serverless previews</title>
    <link rel="canonical" href="https://openshift-knative.github.io/docs/docs/latest/serverless-logic/data-index/data-index-core-concepts.html">
    <meta name="description" content="Data Index Service to allow to index and query audit data in OpenShift Serverless Logic">
    <meta name="keywords" content="workflow, serverless, data, dataindex, data-index, index, service">
    <meta name="generator" content="Antora 3.0.3">
    <link rel="stylesheet" href="../../../../_/css/site.css">
<link rel="stylesheet" href="../../../../_/css/extra.css">
<link rel="stylesheet" href="../../../../_/css/custom.css">
<link rel="stylesheet" href="../../../../_/css/tabs.css">
<link rel="stylesheet" href="../../../../_/font-awesome-4.7.0/css/font-awesome.min.css">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <button class="navbar-burger" data-target="topbar-nav">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <img src="../../../../_/img/serverless-icon.png" class="navbar-logo" alt="OpenShift Serverless icon">
        <a href="">OpenShift Serverless - Technology and Developer Preview Releases</a>
      </div>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- search broken
        <div class="navbar-item hide-for-print">
          <script async src="https://cse.google.com/cse.js?cx=002898025167115630151:gnr5edrg2eo"></script>
          <div class="gcse-searchbox" enableAutoComplete="true"></div>
        </div>
      -->
        <a class="navbar-item" href="https://openshift-knative.github.io/docs">Home</a>
        <a class="navbar-item" href="https://developers.redhat.com/topics/serverless-architecture">Blog</a>
          <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link" href="#">Upstream Projects</a>
              <div class="navbar-dropdown">
                  <a class="navbar-item" href="https://kogito.kie.org/">Kogito</a>
                  <a class="navbar-item" href="https://knative.dev/docs/functions/">Knative Functions</a>
                  <a class="navbar-item" href="https://knative.dev/docs/eventing/">Knative Eventing</a>
              </div>
          </div>
      </div>
    </div>
  </nav>
<!-- need alt search type-->
<!--<div class="gcse-searchresults"></div>-->
</header>
<div class="main-wrapper">
  <div class="navigation-container" data-component="docs" data-version="main">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Serverless</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Using OpenShift Serverless with OpenShift Service Mesh</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../serverless/service-mesh/common-service-mesh-setup.html">Setup Serverless with OpenShift Service Mesh</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../serverless/service-mesh/common-service-mesh-network-isolation.html">Use Service Mesh to isolate network-traffic</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../serverless/service-mesh/eventing-service-mesh-containersource.html">Eventing: Using ContainerSource with OpenShift Service Mesh</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../serverless/service-mesh/eventing-service-mesh-sinkbinding.html">Eventing: Using SinkBinding with OpenShift Service Mesh</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Eventing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../serverless/eventing/transport-encryption-setup.html">Setup transport encryption in Eventing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../serverless/eventing/kafka-scaling-setup.html">Setup Autoscaling For Eventing Kafka Components</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Serving</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../serverless/serving/serving-with-ingress-sharding.html">Use Serving with OpenShift ingress sharding</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../serverless/serving/scaleability-and-performance-of-serving.html">Scalability and performance of OpenShift Serverless Serving</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../serverless/serving/serving-transport-encryption.html">Serving Transport Encryption</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Serverless Logic</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about.html">About OpenShift Serverless Logic</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes.html">Release notes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">User Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../getting-started/learning-environment.html">Learning environment</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../getting-started/preparing-environment.html">Environment setup</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../getting-started/production-environment.html">Production environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../getting-started/create-your-first-workflow-service-with-kn-cli-and-vscode.html">Creating and running workflow projects using KN CLI and Visual Studio Code</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../getting-started/getting-familiar-with-our-tooling.html">Getting familiar with OpenShift Serverless Logic tooling</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Core</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../core/cncf-serverless-workflow-specification-support.html">Serverless Workflow Specification</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../core/handling-events-on-workflows.html">Events</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../core/working-with-callbacks.html">Callbacks</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../core/understanding-jq-expressions.html">jq Expressions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../core/understanding-workflow-error-handling.html">Error handling</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../core/configuration-properties.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../core/defining-an-input-schema-for-workflows.html">Input Schema</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../core/custom-functions-support.html">Custom functions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../core/timeouts-support.html">Timeouts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../core/working-with-parallelism.html">Parallelism</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Tooling</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../tooling/serverless-workflow-editor/swf-editor-overview.html">Editor</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tooling/serverless-workflow-editor/swf-editor-vscode-extension.html">VS Code extension</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tooling/serverless-workflow-editor/swf-editor-chrome-extension.html">Chrome extension for GitHub</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../tooling/serverless-logic-web-tools/serverless-logic-web-tools-overview.html">Serverless Logic Web Tools</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tooling/serverless-logic-web-tools/serverless-logic-web-tools-github-integration.html">Integration with GitHub</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tooling/serverless-logic-web-tools/serverless-logic-web-tools-openshift-integration.html">Integration with OpenShift</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tooling/serverless-logic-web-tools/serverless-logic-web-tools-redhat-application-services-integration.html">Red Hat OpenShift Application and Data Services integration</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tooling/serverless-logic-web-tools/serverless-logic-web-tools-deploy-projects.html">Deployment</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Service Orchestration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../service-orchestration/orchestration-of-openapi-based-services.html">Orchestrating the OpenAPI services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../service-orchestration/configuring-openapi-services-endpoints.html">Configuring the OpenAPI services endpoints</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../service-orchestration/working-with-openapi-callbacks.html">OpenAPI callbacks in OpenShift Serverless Logic</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../service-orchestration/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Event Orchestration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/orchestration-of-asyncapi-based-services.html">Orchestrating AsyncAPI Services</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/event-correlation-with-workflows.html">Event Correlation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../security/authention-support-for-openapi-services.html">Authentication for OpenAPI services</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../security/orchestrating-third-party-services-with-oauth2.html">Orchestration of third-party services using OAuth 2.0 authentication</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Executing, Testing and Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <span class="nav-text">Executing and Testing Workflows</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../testing-and-troubleshooting/quarkus-dev-ui-extension/quarkus-dev-ui-overview.html">Developer UI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../testing-and-troubleshooting/quarkus-dev-ui-extension/quarkus-dev-ui-workflow-instances-page.html">Workflow Instances</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../testing-and-troubleshooting/quarkus-dev-ui-extension/quarkus-dev-ui-workflow-definition-page.html">Workflow Definitions</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../testing-and-troubleshooting/quarkus-dev-ui-extension/quarkus-dev-ui-monitoring-page.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../testing-and-troubleshooting/quarkus-dev-ui-extension/quarkus-dev-ui-custom-dashboard-page.html">Dashboards</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../testing-and-troubleshooting/kn-plugin-workflow-overview.html">Command Line</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Persistence</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../persistence/core-concepts.html">Core concepts</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../cloud/index.html">Cloud</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../cloud/custom-ingress-authz.html">Securing Workflows</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <span class="nav-text">Operator</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../cloud/operator/install-serverless-operator.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Upgrade</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../cloud/operator/upgrade-serverless-operator/upgrade_1_34_0_to_1_35_0.html">OSL 1.34.0 to 1.35.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../cloud/operator/global-configuration.html">Admin Configuration</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../cloud/operator/developing-workflows.html">Development Mode</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../cloud/operator/referencing-resource-files.html">Referencing Workflow Resources</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../cloud/operator/configuring-workflows.html">Workflow Configuration</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../cloud/operator/build-and-deploy-workflows.html">Building and Deploying Workflow Images</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../cloud/operator/supporting-services.html">Deploy Supporting Services</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../cloud/operator/workflow-status-conditions.html">Custom Resource Status</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../cloud/operator/building-custom-images.html">Building Custom Images</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../cloud/operator/customize-podspec.html">Custom Workflow PodSpec</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../cloud/operator/service-discovery.html">Service Discovery</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../cloud/operator/using-persistence.html">Using persistence</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../cloud/operator/configuring-knative-eventing-resources.html">Knative Eventing</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="#cloud/operator/add-custom-ca-to-a-workflow-pod.adoc">Add Custom CA to Workflow Pod</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../cloud/operator/known-issues.html">Roadmap and Known Issues</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../integrations/core-concepts.html">Introduction</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Supporting Services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <span class="nav-text">Jobs Service</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../job-services/core-concepts.html">Core Concepts</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <span class="nav-text">Data Index</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="5">
    <a class="nav-link" href="data-index-core-concepts.html">Core Concepts</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="data-index-service.html">Data Index Standalone Service</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Use Cases</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/index.html">Development of OpenShift Serverless Logic applications using Quarkus and Java</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/getting-started/create-your-first-workflow-service.html">Creating a Quarkus Workflow service</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/getting-started/create-your-first-workflow-project.html">Creating a Quarkus Workflow project</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/getting-started/build-workflow-image-with-quarkus-cli.html">Building workflow images using Quarkus CLI</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/getting-started/working-with-serverless-workflow-quarkus-examples.html">Working with OpenShift Serverless Logic example applications</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/getting-started/test-serverless-workflow-quarkus-examples.html">Testing images of OpenShift Serverless Logic example applications using Quarkus CLI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Deployment</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/deployments/deploying-on-minikube.html">Deploying on Minikube</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/deployments/deploying-on-kubernetes.html">Deploying on Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/deployments/deploying-on-openshift.html">Deploying on OpenShift</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Persistence</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/persistence/persistence-core-concepts.html">Core Concepts</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/persistence/persistence-with-postgresql.html">Running a Quarkus Workflow Application using PostgreSQL</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/persistence/postgresql-advanced-concepts.html">Postgresql Advanced Concepts</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/persistence/postgresql-flyway-migration.html">PostgreSQL Database Migration</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/persistence/integration-tests-with-postgresql.html">OpenShift Serverless Logic integration test using PostgreSQL</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Data Index</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/data-index/data-index-as-quarkus-dev-service.html">Data Index as a Quarkus Development service</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/data-index/data-index-usecase-singleton.html">Deploying Data Index and OpenShift Serverless Logic application on Minikube</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/data-index/data-index-usecase-multi.html">Deploying Data Index and multiple OpenShift Serverless Logic applications on Minikube</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/data-index/data-index-quarkus-extension.html">Data Index Quarkus extensions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Service Orchestration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/service-orchestration/configuring-openapi-services-endpoints-with-quarkus.html">Configuring the OpenAPI services endpoints in different environments</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/service-orchestration/orchestration-of-grpc-services.html">Orchestrating gRPC based Services</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Service Discovery</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/service-discovery/kubernetes-service-discovery.html">Kubernetes service discovery in OpenShift Serverless Logic</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Event Orchestration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/event-orchestration/consume-produce-events-with-knative-eventing.html">Consuming and producing events on Knative Eventing in Quarkus</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/event-orchestration/consume-producing-events-with-kafka.html">Consuming and producing events using Apache Kafka in Quarkus</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/event-orchestration/orchestration-based-saga-pattern.html">Saga orchestration example in OpenShift Serverless Logic</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/event-orchestration/newsletter-subscription-example.html">Newsletter subscription example in OpenShift Serverless Logic</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Timeouts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/timeouts/timeout-showcase-example.html">Timeouts Showcase in OpenShift Serverless Logic</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Callbacks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/callbacks/callback-state-example.html">Example of OpenShift Serverless Logic application using callback state with Quarkus</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Integrations of external services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/integrations/camel-routes-integration.html">Integrating with Camel routes</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/integrations/custom-functions-knative.html">Invoking Knative services from OpenShift Serverless Logic</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/integrations/expose-metrics-to-prometheus.html">Exposing Workflow base metrics to Prometheus</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/integrations/serverless-dashboard-with-runtime-data.html">Displaying Workflow Data in Dashboards</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-toggle"></button>
    <span class="nav-text">Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/testing/basic-integration-tests-with-restassured.html">Testing your Quarkus Workflow Application using REST Assured</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/testing/mocking-http-cloudevents-with-wiremock.html">Mocking HTTP CloudEvents sink using WireMock</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../use-cases/advanced-developer-use-cases/testing/mocking-openapi-services-with-wiremock.html">Mocking OpenAPI services using WireMock</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Buildpacks for Serverless Functions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../functions/serverless-functions-about.html">About buildpacks for OpenShift Serverless Functions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../functions/serverless-functions-buildpacks.html">Building and deploying functions on the cluster</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Documentation</span>
    <span class="version">main</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Documentation</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../../index.html">main</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <div class="main-view-and-toolbar">
    <div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../../index.html">Documentation</a></li>
    <li class="crumb">Serverless Logic</li>
    <li class="crumb">User Guides</li>
    <li class="crumb">Supporting Services</li>
    <li class="crumb">Data Index</li>
    <li class="crumb"><a href="data-index-core-concepts.html">Core Concepts</a></li>
  </ul>
</nav>
</div>
    <div class="main-view-and-toc">
        <main class="main">
          <article class="doc">
<h1>Data Index Core Concepts</h1>
<div id="preamble">
<div class="sectionbody">
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Basic understanding of <a href="https://graphql.org/learn/">GraphQL</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Data Index</strong> service is a dedicated supporting service that stores the data related to the workflow instances and their associated jobs.
This service provides a GraphQL endpoint allowing users to query and modify that data.</p>
</div>
<div class="paragraph">
<p>The data processed by the Data Index service are received via events. The events that Data Index consumes can be generated by any workflow or the <a href="../job-services/core-concepts.html" class="xref page">Job service</a> itself.
This event communication can be configured in different ways as described in the <a href="#data-index-service-communication">Data Index communication configuration</a> section.</p>
</div>
<div class="paragraph">
<p>The Data Index service uses Apache Kafka or Knative eventing to consume <a href="https://cloudevents.io/">CloudEvents</a> messages from workflows.
The event data is indexed and stored in the database for access via GraphQL. These events contain information about units of work executed for a workflow.
The Data Index service is at the core of all OpenShift Serverless Logic search, insight, and management capabilities.</p>
</div>
<div class="paragraph">
<p>The OpenShift Serverless Logic Data Index Service has the following key attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Flexible data structure</p>
</li>
<li>
<p>Distributable and cloud-ready format</p>
</li>
<li>
<p>Message-based communication with workflows (Apache Kafka, Knative, CloudEvents)</p>
</li>
<li>
<p>Powerful querying API using GraphQL</p>
</li>
<li>
<p>Management capabilities using the Gateway API, to perform actions using GraphQL syntax on remote runtimes with a single entrypoint</p>
</li>
</ul>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_data_index_service_in_openshift_serverless_logic">Data Index service in OpenShift Serverless Logic</a></li>
<li><a href="#data-index-deployments">Data Index scenarios</a>
<ul class="sectlevel2">
<li><a href="#_data_index_as_a_standalone_service">Data Index as a standalone service</a></li>
<li><a href="#data-index-dev-service">Data Index service as Quarkus Development service</a></li>
<li><a href="#_data_index_service_as_quarkus_extension">Data Index service as Quarkus extension</a></li>
</ul>
</li>
<li><a href="#data-index-storage">Data Index storage</a></li>
<li><a href="#data-index-graphql">Data Index GraphQL endpoint</a>
<ul class="sectlevel2">
<li><a href="#data-index-ext-queries">GraphQL queries for workflow instances and jobs</a></li>
<li><a href="#data-index-gateway-api">Data Index service Gateway API</a></li>
<li><a href="#data-index-graphql-ui">Data Index GraphQL UI</a></li>
</ul>
</li>
<li><a href="#data-index-service-communication">Data Index service communication configuration</a>
<ul class="sectlevel2">
<li><a href="#_knative_eventing">Knative Eventing</a></li>
<li><a href="#_kafka_eventing">Kafka eventing</a></li>
<li><a href="#_data_index_quarkus_extension_and_jobs_embedded_addon">Data Index Quarkus extension and Jobs embedded addon</a></li>
</ul>
</li>
<li><a href="#_additional_resources">Additional resources</a></li>
<li><a href="#_found_an_issue"><em><strong>Found an issue?</strong></em></a></li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="_data_index_service_in_openshift_serverless_logic"><a class="anchor" href="#_data_index_service_in_openshift_serverless_logic"></a>Data Index service in OpenShift Serverless Logic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The OpenShift Serverless Logic Data Index Service is a Quarkus application, based on <a href="https://vertx.io/">Vert.x</a> with <a href="https://smallrye.io/smallrye-reactive-messaging/smallrye-reactive-messaging/3.3">Reactive Messaging</a>, that exposes a <a href="https://graphql.org">GraphQL</a> endpoint that client applications use to access indexed data and perform management operations related to running workflow instances.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The indexing functionality in the Data Index service is provided by choosing one of the following persistence providers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.postgresql.org/">PostgreSQL</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Data Index Service has been designed as an application to store and query the existing workflow data. The data comes within events. The service allows multiple connection options as described in the <a href="#data-index-service-communication">Data Index service communication configuration</a> section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="data-index-deployments"><a class="anchor" href="#data-index-deployments"></a>Data Index scenarios</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Data Index is distributed in different ways to allow deployment in different topologies, and depending on how the data is indexed.</p>
</div>
<div class="paragraph">
<p>The following sections describe the different options of Data Index deployments.</p>
</div>
<div class="sect2">
<h3 id="_data_index_as_a_standalone_service"><a class="anchor" href="#_data_index_as_a_standalone_service"></a>Data Index as a standalone service</h3>
<div class="paragraph">
<p>It can be deployed explicitly referencing the <strong>image</strong>, starting a separated service inside a container. See <a href="data-index-service.html" class="xref page">Data Index standalone</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/data-index/data-index-standalone-service.png" alt="Image of data-index deployment an external service">
</div>
</div>
<div class="paragraph">
<p>This type of deployment requires to choose the right image depending on the persistence, specify the database connection properties, and the event consumption configuration.</p>
</div>
</div>
<div class="sect2">
<h3 id="data-index-dev-service"><a class="anchor" href="#data-index-dev-service"></a>Data Index service as Quarkus Development service</h3>
<div class="paragraph">
<p>When the Quarkus Dev mode is used in the OpenShift Serverless Logic application, Data Index can be deployed transparently as a <strong>Quarkus Development Service</strong>.
When the OpenShift Serverless Logic Process Quarkus extension is utilized, a temporary Data Index Service is automatically provisioned while the Quarkus application runs in development mode making the Quarkus Dev Service available for use.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/data-index/data-index-dev-service.png" alt="Image of data-index deployment an Quarkus Dev Service">
</div>
</div>
<div class="paragraph">
<p>More details are provided in the <a href="../use-cases/advanced-developer-use-cases/data-index/data-index-as-quarkus-dev-service.html" class="xref page">Data Index as a Quarkus Development service</a> section.</p>
</div>
<div class="paragraph">
<p>The OpenShift Serverless Logic Process Quarkus extension sets up your Quarkus application to automatically replicate any OpenShift Serverless Logic messaging events related to workflow instances or jobs into the provisioned Data Index instance.</p>
</div>
<div class="paragraph">
<p>For more information about Quarkus Dev Services, see <a href="https://quarkus.io/guides/dev-services">Dev Services guide</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_data_index_service_as_quarkus_extension"><a class="anchor" href="#_data_index_service_as_quarkus_extension"></a>Data Index service as Quarkus extension</h3>
<div class="paragraph">
<p>Data Index can be included as part of the same OpenShift Serverless Logic application using the <strong>Data Index extension</strong>, through the provided addons.</p>
</div>
<div class="paragraph">
<p>This scenario is specific to add the Data Index data indexing features and the GraphQL endpoint exposure inside a workflow application.</p>
</div>
<div class="paragraph">
<p>The communication with the workflow where the extension is added, is something internal to the application, allowing to simplify the communication between services and avoiding extra configuration for that purpose.</p>
</div>
<div class="paragraph">
<p>In this case, the indexation has some limitations: it is only able to index data from the workflows deployed in the same application.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/data-index/data-index-addon.png" alt="Image of data-index as a Quarkus Extension">
</div>
</div>
<div class="paragraph">
<p>More details are available in the <a href="../use-cases/advanced-developer-use-cases/data-index/data-index-quarkus-extension.html" class="xref page">Data Index Quarkus Extension</a> section.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="data-index-storage"><a class="anchor" href="#data-index-storage"></a>Data Index storage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to store the indexed data, Data Index needs some specific tables to be created. Data Index is ready to use <a href="https://quarkus.io/guides/flyway">Quarkus flyway</a> for that purpose.</p>
</div>
<div class="paragraph">
<p>Activating the 'migrate-at-start' option enables automatic migration of the Data Index schema.</p>
</div>
<div class="paragraph">
<p>For more details about Flyway migrations, see <a href="../use-cases/advanced-developer-use-cases/persistence/postgresql-flyway-migration.html" class="xref page">PostgreSQL Database Migration</a> section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="data-index-graphql"><a class="anchor" href="#data-index-graphql"></a>Data Index GraphQL endpoint</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Data Index provides GraphQL endpoint that allows users to interact with the stored data.
For more information about GraphQL see <a href="https://graphql.org">GraphQL documentation</a></p>
</div>
<div class="sect2">
<h3 id="data-index-ext-queries"><a class="anchor" href="#data-index-ext-queries"></a>GraphQL queries for workflow instances and jobs</h3>
<div class="paragraph">
<p>This guide provides as examples, some GraphQL queries that allow to retrieve data about workflow instances and jobs.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Retrieve data from workflow instances</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>You can retrieve data about a specified instance from your workflow definition.</p>
</div>
<div class="listingblock">
<div class="title">Example query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">{
  ProcessInstances {
    id
    processId
    state
    parentProcessInstanceId
    rootProcessId
    rootProcessInstanceId
    variables
    nodes {
      id
      name
      type
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Retrieve data from jobs</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>You can retrieve data from a specified job instance.</p>
</div>
<div class="listingblock">
<div class="title">Example query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">{
  Jobs {
    id
    status
    priority
    processId
    processInstanceId
    executionCounter
  }
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Filter query results using the <code>where</code> parameter</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>You can use the <code>where</code> parameter with multiple combinations to filter query results based on workflow attributes.</p>
</div>
<div class="listingblock">
<div class="title">Example query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">{
  ProcessInstances(where: {state: {equal: ACTIVE}}) {
    id
    processId
    processName
    start
    state
    variables
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">{
  ProcessInstances(where: {id: {equal: "d43a56b6-fb11-4066-b689-d70386b9a375"}}) {
    id
    processId
    processName
    start
    state
    variables
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, all filtered attributes are executed as <code>AND</code> operations in queries. You can modify this behavior by combining filters with an <code>AND</code> or <code>OR</code> operator.</p>
</div>
<div class="listingblock">
<div class="title">Example query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">{
  ProcessInstances(where: {or: {state: {equal: ACTIVE}, rootProcessId: {isNull: false}}}) {
    id
    processId
    processName
    start
    end
    state
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">{
  ProcessInstances(where: {and: {processId: {equal: "travels"}, or: {state: {equal: ACTIVE}, rootProcessId: {isNull: false}}}}) {
    id
    processId
    processName
    start
    end
    state
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Depending on the attribute type, the following operators are also available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>String array argument:</p>
<div class="ulist">
<ul>
<li>
<p><code>contains</code> : String</p>
</li>
<li>
<p><code>containsAll</code>: Array of strings</p>
</li>
<li>
<p><code>containsAny</code>: Array of strings</p>
</li>
<li>
<p><code>isNull</code>: Boolean (<code>true</code> or <code>false</code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>String argument:</p>
<div class="ulist">
<ul>
<li>
<p><code>in</code>: Array of strings</p>
</li>
<li>
<p><code>like</code>: String</p>
</li>
<li>
<p><code>isNull</code>: Boolean (<code>true</code> or <code>false</code>)</p>
</li>
<li>
<p><code>equal</code>: String</p>
</li>
</ul>
</div>
</li>
<li>
<p>ID argument:</p>
<div class="ulist">
<ul>
<li>
<p><code>in</code>: Array of strings</p>
</li>
<li>
<p><code>equal</code>: String</p>
</li>
<li>
<p><code>isNull</code>: Boolean (<code>true</code> or <code>false</code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Boolean argument:</p>
<div class="ulist">
<ul>
<li>
<p><code>isNull</code>: Boolean (<code>true</code> or <code>false</code>)</p>
</li>
<li>
<p><code>equal</code>: Boolean (<code>true</code> or <code>false</code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Numeric argument:</p>
<div class="ulist">
<ul>
<li>
<p><code>in</code>: Array of integers</p>
</li>
<li>
<p><code>isNull</code>: Boolean</p>
</li>
<li>
<p><code>equal</code>: Integer</p>
</li>
<li>
<p><code>greaterThan</code>: Integer</p>
</li>
<li>
<p><code>greaterThanEqual</code>: Integer</p>
</li>
<li>
<p><code>lessThan</code>: Integer</p>
</li>
<li>
<p><code>lessThanEqual</code>: Integer</p>
</li>
<li>
<p><code>between</code>: Numeric range</p>
</li>
<li>
<p><code>from</code>: Integer</p>
</li>
<li>
<p><code>to</code>: Integer</p>
</li>
</ul>
</div>
</li>
<li>
<p>Date argument:</p>
<div class="ulist">
<ul>
<li>
<p><code>isNull</code>: Boolean (<code>true</code> or <code>false</code>)</p>
</li>
<li>
<p><code>equal</code>: Date time</p>
</li>
<li>
<p><code>greaterThan</code>: Date time</p>
</li>
<li>
<p><code>greaterThanEqual</code>: Date time</p>
</li>
<li>
<p><code>lessThan</code>: Date time</p>
</li>
<li>
<p><code>lessThanEqual</code>: Date time</p>
</li>
<li>
<p><code>between</code>: Date range</p>
</li>
<li>
<p><code>from</code>: Date time</p>
</li>
<li>
<p><code>to</code>: Date time</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Sort query results using the <code>orderBy</code> parameter</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>You can use the <code>orderBy</code> parameter to sort query results based on workflow attributes. You can also specify the direction of sorting in ascending <code>ASC</code> order or descending <code>DESC</code> order. Multiple attributes are applied to the database query in the order they are specified in the query filter.</p>
</div>
<div class="listingblock">
<div class="title">Example query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">{
  ProcessInstances(where: {state: {equal: ACTIVE}}, orderBy: {start: ASC}) {
    id
    processId
    processName
    start
    end
    state
  }
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Limit and offset query results using the <code>pagination</code> parameter</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>You can use the <code>pagination</code> parameter to specify a <code>limit</code> and <code>offset</code> for query results.</p>
</div>
<div class="listingblock">
<div class="title">Example query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">{
  ProcessInstances(where: {state: {equal: ACTIVE}}, orderBy: {start: ASC}, pagination: {limit: 10, offset: 0}) {
    id
    processId
    processName
    start
    end
    state
  }
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="data-index-gateway-api"><a class="anchor" href="#data-index-gateway-api"></a>Data Index service Gateway API</h3>
<div class="paragraph">
<p>Data Index incorporates a set of queries or mutations that allow firing operations on workflow endpoints using GraphQL notation.</p>
</div>
<div class="paragraph">
<p>The Data Index Gateway API enables you to perform the following operations:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Abort a workflow instance</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Retrieves a workflow instance with the ID passed as a parameter and launches the abort operation on related OpenShift Serverless Logic service.</p>
</div>
<div class="listingblock">
<div class="title">Example mutation for abort operation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">mutation {
    ProcessInstanceAbort (id:"66e05e9c-eaab-47af-a83e-156498b7096d")
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Retry a workflow instance</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Retrieves a workflow instance with the id passed as a parameter and launches the retry operation on related OpenShift Serverless Logic service.</p>
</div>
<div class="listingblock">
<div class="title">Example mutation for retry operation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">mutation {
    ProcessInstanceRetry (id:"66e05e9c-eaab-47af-a83e-156498b7096d")
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Skip a workflow instance</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Retrieves a workflow instance with the ID passed as a parameter and launches the skip operation on related OpenShift Serverless Logic service.</p>
</div>
<div class="listingblock">
<div class="title">Example mutation for skip operation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">mutation {
    ProcessInstanceSkip (id:"66e05e9c-eaab-47af-a83e-156498b7096d")
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Retrieve workflow instance nodes</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Retrieves the nodes of a workflow instance that are coming from the process definition. When the <code>nodeDefinitions</code> field of a workflow instance is queried, a call to a specific OpenShift Serverless Logic service is generated to retrieve the requested list of available nodes.</p>
</div>
<div class="listingblock">
<div class="title">Example query to retrieve workflow instance nodes</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">{ProcessInstances(where: { id: {equal: "1017afb1-5749-440e-8b9b-6b876bb5894d"}}){
  diagram
}}</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Update workflow instance variables</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Updates the variables of a workflow instance using the <code>id</code> passed as a parameter. Retrieves a workflow instance using the <code>id</code> passed as a parameter and launches the update operation on related OpenShift Serverless Logic service with the new values passed in <code>variables</code> parameter.</p>
</div>
<div class="listingblock">
<div class="title">Example mutation to update workflow instance variables</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">mutation {
    ProcessInstanceUpdateVariables
        (id:"23147fcc-da82-43a2-a577-7a36b26094bd",
         variables:"{\"it_approval\":true,\"candidate\":{\"name\":\"Joe\",\"email\":\"jdoe@ts.com\",\"salary\":30000,\"skills\":\"java\"},\"hr_approval\":true}")
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Trigger a node instance</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Triggers a node instance using the node definition <code>nodeId</code>. The <code>nodeId</code> is included in the <code>nodeInstances</code> of a workflow instance using the <code>id</code> passed as parameter.</p>
</div>
<div class="listingblock">
<div class="title">Example mutation to trigger a node instance</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">mutation{
  NodeInstanceTrigger(
    id: "9674e3ed-8c13-4c3f-870e-7465d9ca7ca7",
    nodeId:"_B8C4F63C-81AD-4291-9C1B-84967277EEF6")
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Retrigger a node instance</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Retriggers a node instance using the <code>id</code>, which is similar to <code>nodeInstanceId</code> related to a workflow instance. The <code>id</code> of the workflow instance is passed as a parameter.</p>
</div>
<div class="listingblock">
<div class="title">Example mutation to retrigger a node instance</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">mutation{
  NodeInstanceRetrigger(
    id: "9674e3ed-8c13-4c3f-870e-7465d9ca7ca7",
    nodeInstanceId:"01756ba2-ac16-4cf1-9d74-154ae8f2df21")
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Cancel a node instance</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Cancels a node instance with the <code>id</code>, which is similar to <code>nodeInstanceId</code> related to a workflow instance. The <code>id</code> of the workflow instance is passed as a parameter.</p>
</div>
<div class="listingblock">
<div class="title">Example mutation to cancel a node instance</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">mutation{
  NodeInstanceCancel(
    id: "9674e3ed-8c13-4c3f-870e-7465d9ca7ca7",
    nodeInstanceId:"01756ba2-ac16-4cf1-9d74-154ae8f2df21")
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To enable described management operations on workflow instances, make sure your project is configured to have the <code>kie-addons-quarkus-process-management</code> dependency on its <code>pom.xml</code> file to have this management operations enabled, like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.kie&lt;/groupId&gt;
  &lt;artifactId&gt;kie-addons-quarkus-process-management&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Retrieve the workflow instance source file content</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Retrieves the workflow instance source file. When the <code>source</code> field of a workflow instance is queried, a call to a specific OpenShift Serverless Logic service is generated to retrieve the requested workflow instance source file content.</p>
</div>
<div class="listingblock">
<div class="title">Example query to retrieve a workflow instance source file content</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">{ProcessInstances(where: { id: {equal: "1017afb1-5749-440e-8b9b-6b876bb5894d"}}){
  source
}}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The workflow instance source field only will be available when <code>kie-addons-quarkus-source-files</code> dependency is added on OpenShift Serverless Logic runtime service <code>pom.xml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    &lt;dependency&gt;
      &lt;groupId&gt;org.kie&lt;/groupId&gt;
      &lt;artifactId&gt;kie-addons-quarkus-source-files&lt;/artifactId&gt;
    &lt;/dependency&gt;</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Reschedule a job</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Reschedules a job using the <code>id</code>. The job <code>id</code> and other information are passed in the <code>data</code> parameter.</p>
</div>
<div class="listingblock">
<div class="title">Example mutation to reschedule a job</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">mutation{
  JobReschedule(
    id: "9674e3ed-8c13-4c3f-870e-7465d9ca7ca7",
    data:"{\"expirationTime\": \"2033-06-27T04:35:54.631Z\",\"retries\": 2}")
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Cancel a job</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Cancels a job using the <code>id</code> passed as a parameter.</p>
</div>
<div class="listingblock">
<div class="title">Example mutation to cancel a job</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">mutation{
  JobCancel(
    id: "9674e3ed-8c13-4c3f-870e-7465d9ca7ca7")
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="data-index-graphql-ui"><a class="anchor" href="#data-index-graphql-ui"></a>Data Index GraphQL UI</h3>
<div class="paragraph">
<p>Data Index GraphQL UI is provided to interact with GraphQL endpoint.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/data-index/data-index-graphql-ui.png" alt="Image of data-index GraphQL UI">
</div>
</div>
<div class="paragraph">
<p>When the Data Index is deployed as a standalone service, this UI will be available at <code>/graphiql/</code> endpoint (i.e: at <a href="http://localhost:8180/graphiql/" class="bare">localhost:8180/graphiql/</a>)</p>
</div>
<div class="paragraph">
<p>To enable the GraphQL UI when deploying the Data Index extension, the property <code>quarkus.kogito.data-index.graphql.ui.always-include</code> must be enabled.</p>
</div>
<div class="paragraph">
<p>It will be accessible at: &lt;quarkus.http.root-path&gt;&lt;quarkus.http.non-application-root-path&gt;/graphql-ui/ (i.e: <a href="http://localhost:8080/q/graphql-ui/" class="bare">localhost:8080/q/graphql-ui/</a>)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>quarkus.http.root-path' and `quarkus.http.non-application-root-path</code> belong to the workflow application where the Data Index extension has been added. <a href="https://quarkus.io/blog/path-resolution-in-quarkus/#defaults">Here</a> there are more details about those properties and their default values.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="data-index-service-communication"><a class="anchor" href="#data-index-service-communication"></a>Data Index service communication configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to index the data, Data Index allows multiple connection options to be able to consume the information provided by the different workflows.</p>
</div>
<div class="paragraph">
<p>The final goal is to receive the application-generated data related to the workflow instances and jobs. The information that comes inside events, is indexed and stored in the database allowing it to be consumed through the provided GraphQL endpoint.</p>
</div>
<div class="sect2">
<h3 id="_knative_eventing"><a class="anchor" href="#_knative_eventing"></a>Knative Eventing</h3>
<div class="paragraph">
<p>In order to interact with the Data Index separated service, use the Knative eventing system eventing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the Data Index service and deployment, defining the Database connection properties and setting the <code>KOGITO_DATA_INDEX_QUARKUS_PROFILE</code> to <code>http-events-support</code>.</p>
</li>
<li>
<p>Specify the Knative Triggers to filter the Data Index events.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example <code>DataIndex</code> resource with triggers definition (requires Knative):</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: eventing.knative.dev/v1
kind: Trigger
metadata:
  name: data-index-service-postgresql-processes-trigger
spec:
  broker: default
  filter:
    attributes:
      type: ProcessInstanceEvent
  subscriber:
    ref:
      apiVersion: v1
      kind: Service
      name: data-index-service-postgresql
    uri: /processes
---
apiVersion: eventing.knative.dev/v1
kind: Trigger
metadata:
  name: data-index-service-postgresql-jobs-trigger
spec:
  broker: default
  filter:
    attributes:
      type: JobEvent
  subscriber:
    ref:
      apiVersion: v1
      kind: Service
      name: data-index-service-postgresql
    uri: /jobs</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Configure the workflow to use the K_SINK as outgoing connection url</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example of configuration in OpenShift Serverless Logic application <code>application.properties</code> file to communicate with Knative</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">mp.messaging.outgoing.kogito-processinstances-events.connector=quarkus-http
mp.messaging.outgoing.kogito-processinstances-events.url=${K_SINK}
mp.messaging.outgoing.kogito-processinstances-events.method=POST</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Job service</strong> needs to be configured to send the events to the Knative K_SINK to have them available for Data Index related triggers.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_kafka_eventing"><a class="anchor" href="#_kafka_eventing"></a>Kafka eventing</h3>
<div class="paragraph">
<p>To configure the communication between the Data Index Service and the workflow through Kafka, you must provide a set of configurations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the Data Index service and deployment, defining the Database connection properties and setting the <code>KOGITO_DATA_INDEX_QUARKUS_PROFILE</code> to <code>kafka-events-support</code> (this value is set by default).</p>
</li>
<li>
<p>Configure the OpenShift Serverless Logic application to use the smallrye-kafka connector and the expected topic.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example of configuration in OpenShift Serverless Logic application <code>application.properties</code> file to communicate with Kafka</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">mp.messaging.outgoing.kogito-processinstances-events.connector=smallrye-kafka
mp.messaging.outgoing.kogito-processinstances-events.topic=kogito-processinstances-events
mp.messaging.outgoing.kogito-processinstances-events.value.serializer=org.apache.kafka.common.serialization.StringSerializer</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Job service</strong> is configured to send the JobEvents to the kafka topic <code>kogito-jobs-events</code> to have them available for Data Index consumption.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_data_index_quarkus_extension_and_jobs_embedded_addon"><a class="anchor" href="#_data_index_quarkus_extension_and_jobs_embedded_addon"></a>Data Index Quarkus extension and Jobs embedded addon</h3>
<div class="paragraph">
<p>When Data Index functionality is added as a Quarkus extension to the workflow, there is no event configuration.
In this case, the data indexation is done internally, and all interactions are through the Data Index Gateway API.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_resources"><a class="anchor" href="#_additional_resources"></a>Additional resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="../use-cases/advanced-developer-use-cases/event-orchestration/consume-producing-events-with-kafka.html" class="xref page">Consuming and producing events using Apache Kafka in Quarkus</a></p>
</li>
<li>
<p><a href="../use-cases/advanced-developer-use-cases/event-orchestration/consume-produce-events-with-knative-eventing.html" class="xref page">Consuming and producing events on Knative Eventing in Quarkus</a></p>
</li>
<li>
<p><a href="../use-cases/advanced-developer-use-cases/timeouts/timeout-showcase-example.html" class="xref page">Timeouts Showcase in OpenShift Serverless Logic</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_found_an_issue"><a class="anchor" href="#_found_an_issue"></a><em><strong>Found an issue?</strong></em></h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you find an issue or any misleading information, please feel free to report it <a href="https://github.com/kiegroup/kogito-docs/issues/new">here</a>.
We really appreciate it!</p>
</div>
</div>
</div>
</article>
        </main>
            </div>
  </div>
</div><footer class="footer">
  <p>Adapted from Antora default UI, (c) 2019</p>
</footer>
<script src="../../../../_/js/site.js"></script>
<script src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/tabsBehavior.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
