<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Displaying workflow data in dashboards :: Red Hat OpenShift Serverless previews</title>
    <link rel="canonical" href="https://openshift-knative.github.io/docs/docs/latest/serverless-logic/integrations/serverless-dashboard-with-runtime-data.html">
    <meta name="generator" content="Antora 3.0.3">
    <link rel="stylesheet" href="../../../../_/css/site.css">
<link rel="stylesheet" href="../../../../_/css/extra.css">
<link rel="stylesheet" href="../../../../_/css/custom.css">
<link rel="stylesheet" href="../../../../_/css/tabs.css">
<link rel="stylesheet" href="../../../../_/font-awesome-4.7.0/css/font-awesome.min.css">
<!--
<link rel="icon" href="../../../../favicon.ico" type="image/x-icon">
-->
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <button class="navbar-burger" data-target="topbar-nav">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <img src="../../../../_/img/serverless-icon.svg" class="navbar-logo" alt="OpenShift Serverless icon">
        <a href="">OpenShift Serverless - Developer Preview Releases</a>
      </div>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- search broken
        <div class="navbar-item hide-for-print">
          <script async src="https://cse.google.com/cse.js?cx=002898025167115630151:gnr5edrg2eo"></script>
          <div class="gcse-searchbox" enableAutoComplete="true"></div>
        </div>
      -->
        <a class="navbar-item" href="https://openshift-knative.github.io/docs">Home</a>
        <a class="navbar-item" href="https://developers.redhat.com/topics/serverless-architecture">Blog</a>
        <a class="navbar-item" href="https://kogito.kie.org/">The Kogito Project</a>
      </div>
    </div>
  </nav>
<!-- need alt search type-->
<!--<div class="gcse-searchresults"></div>-->
</header>
<div class="main-wrapper">
  <div class="navigation-container" data-component="docs" data-version="main">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Serverless Logic</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about.html">About OpenShift Serverless Logic</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">User Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../getting-started/create-your-first-workflow-service.html">Creating your first workflow service</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../getting-started/cncf-serverless-workflow-specification-support.html">CNCF Serverless Workflow specification</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../getting-started/getting-familiar-with-our-tooling.html">Getting familiar with OpenShift Serverless Logic tooling</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Core</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../core/understanding-jq-expressions.html">jq expressions in OpenShift Serverless Logic</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../core/understanding-workflow-error-handling.html">Error handling in OpenShift Serverless Logic</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../core/working-with-parallelism.html">Parallelism in OpenShift Serverless Logic</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../core/configuration-properties.html">Configuration properties in OpenShift Serverless Logic</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../core/defining-an-input-schema-for-workflows.html">Defining an input schema for your workflows</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../core/custom-functions-support.html">Custom functions for your OpenShift Serverless Logic service</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Tooling</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../tooling/serverless-workflow-editor/swf-editor-overview.html">Serverless Workflow editor</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tooling/serverless-workflow-editor/swf-editor-vscode-extension.html">VS Code extension for Serverless Workflow editor</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tooling/serverless-workflow-editor/swf-editor-chrome-extension.html">Chrome GitHub extension for Serverless Workflow editor</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../tooling/quarkus-dev-ui-extension/quarkus-dev-ui-overview.html">Kogito Serverless Workflow Tools extension in Quarkus Dev UI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tooling/quarkus-dev-ui-extension/quarkus-dev-ui-workflow-instances-page.html">Workflow Instances in Kogito Serverless Workflow Tools extension</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tooling/quarkus-dev-ui-extension/quarkus-dev-ui-workflow-definition-page.html">Workflow Definitions in Kogito Serverless Workflow Tools extension</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../tooling/kn-plugin-workflow-overview.html">OpenShift Serverless Logic plug-in for Knative CLI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../tooling/serverless-logic-web-tools/serverless-logic-web-tools-overview.html">Serverless Logic Web Tools</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tooling/serverless-logic-web-tools/serverless-logic-web-tools-github-integration.html">GitHub integration</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tooling/serverless-logic-web-tools/serverless-logic-web-tools-openshift-integration.html">OpenShift integration</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tooling/serverless-logic-web-tools/serverless-logic-web-tools-redhat-application-services-integration.html">Red Hat OpenShift Application and Data Services integration</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tooling/serverless-logic-web-tools/serverless-logic-web-tools-deploy-projects.html">Deploying projects</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../tooling/serverless-logic-web-tools/serverless-logic-web-tools-enable-kogito-swf-visualization.html">Kogito Serverless Workflow Visualization</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Service Orchestration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../service-orchestration/orchestration-of-openapi-based-services.html">Orchestrating the OpenAPI services</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../service-orchestration/configuring-openapi-services-endpoints.html">Configuring the OpenAPI services endpoints</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../service-orchestration/orchestration-of-grpc-services.html">Orchestration of gRPC based services</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Eventing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/handling-events-on-workflows.html">Event state in OpenShift Serverless Logic</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/consume-producing-events-with-kafka.html">Consuming and producing events using Apache Kafka</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/consume-produce-events-with-knative-eventing.html">Consuming and producing events on Knative Eventing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/event-correlation-with-workflows.html">Event correlation in OpenShift Serverless Logic</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../eventing/working-with-callbacks.html">Callback state in OpenShift Serverless Logic</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../security/authention-support-for-openapi-services.html">Authentication for OpenAPI services in OpenShift Serverless Logic</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../security/orchestrating-third-party-services-with-oauth2.html">Orchestration of third-party services using OAuth 2.0 authentication in OpenShift Serverless Logic</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Testing and Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../testing-and-troubleshooting/mocking-http-cloudevents-with-wiremock.html">Mocking HTTP CloudEvents sink using WireMock</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../testing-and-troubleshooting/mocking-openapi-services-with-wiremock.html">Mocking OpenAPI services using WireMock</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../testing-and-troubleshooting/basic-integration-tests-with-restassured.html">Testing your workflow application using REST Assured</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../testing-and-troubleshooting/integration-tests-with-postgresql.html">OpenShift Serverless Logic integration test using PostgreSQL</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Persistence</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../persistence/persistence-with-postgresql.html">Running a workflow service using PostgreSQL</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Cloud</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../cloud/build-workflow-image-with-quarkus-cli.html">Building workflow images using Quarkus CLI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../cloud/deploying-on-minikube.html">Deploying your OpenShift Serverless Logic application on Minikube</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../cloud/kubernetes-service-discovery.html">Kubernetes service discovery in OpenShift Serverless Logic</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="expose-metrics-to-prometheus.html">Exposing the workflow base metrics to Prometheus</a>
  </li>
  <li class="nav-item is-current-page" data-depth="4">
    <a class="nav-link" href="serverless-dashboard-with-runtime-data.html">Displaying workflow data in dashboards</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <span class="nav-text">Use Cases</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../use-cases/orchestration-based-saga-pattern.html">Saga orchestration example in OpenShift Serverless Logic</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Documentation</span>
    <span class="version">main</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Documentation</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../../index.html">main</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <div class="main-view-and-toolbar">
    <div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../../index.html">Documentation</a></li>
    <li class="crumb">Serverless Logic</li>
    <li class="crumb">User Guides</li>
    <li class="crumb">Integrations</li>
    <li class="crumb"><a href="serverless-dashboard-with-runtime-data.html">Displaying workflow data in dashboards</a></li>
  </ul>
</nav>
</div>
    <div class="main-view-and-toc">
        <main class="main">
          <article class="doc">
<h1>Displaying workflow data in dashboards</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document describes how you can build dashboards to monitor your workflows data.</p>
</div>
<div class="paragraph">
<p>To build the dashboards, you need data, which you can acquire from your workflows using one of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enable metrics</p>
</li>
<li>
<p>Integrate with Data Index to consume data using the REST API</p>
</li>
<li>
<p>Use custom mechanisms, such as <code>ProcessInstanceListener</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following sections describes the process of creating dashboards using metrics and Data Index GraphQL REST API.</p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#con-sw-dashboard">Dashboards for workflows</a></li>
<li><a href="#proc-sw-dashboard-metrics">Building dashboards using metrics</a></li>
<li><a href="#proc-sw-dashboard-data-index">Building dashboards using Data Index</a></li>
<li><a href="#_additional_resources">Additional resources</a></li>
<li><a href="#_found_an_issue"><em><strong>Found an issue?</strong></em></a></li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="con-sw-dashboard"><a class="anchor" href="#con-sw-dashboard"></a>Dashboards for workflows</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The dashboards for workflows are visualization of data that run on the client side. The dashboards are created using <a href="https://www.dashbuilder.org">Dashbuilder</a>, which consumes data from any JSON source. You can define a dashboard in YAML format.</p>
</div>
<div class="paragraph">
<p>To use the Dashbuilder, download and uncompress the <code>dashbuilder-client</code> NPM package. Also, edit the <code>setup.js</code> file to link your YAML files. For more information about using Dashbuilder, see <a href="https://www.dashbuilder.org/docs/#_client_only">Dashbuilder documentation</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/integrations/dashbuilder-sample-report.png" alt="dashbuilder sample report">
</div>
<div class="title">Figure 1. Dashbuilder</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="proc-sw-dashboard-metrics"><a class="anchor" href="#proc-sw-dashboard-metrics"></a>Building dashboards using metrics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can build dashboards to monitor the data of your workflows using metrics.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A workflow application is created.</p>
<div class="paragraph">
<p>For more information about creating a workflow, see <a href="../getting-started/create-your-first-workflow-service.html" class="xref page">Creating your first workflow service</a>.</p>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To enable metrics for your workflows application add <code>org.kie.kogito:kogito-addons-quarkus-monitoring-prometheus</code> dependency in <code>pom.xml</code> file of your application:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="title">Add metrics dependency to <code>pom.xml</code> file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    &lt;dependency&gt;
      &lt;groupId&gt;org.kie.kogito&lt;/groupId&gt;
      &lt;artifactId&gt;kogito-addons-quarkus-monitoring-prometheus&lt;/artifactId&gt;
    &lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can find the metrics in <code>/q/metrics</code> path.</p>
</div>
<div class="paragraph">
<p>The dashbuilder can consume the data of your workflow directly from the metrics endpoints. Therefore, you can use a <a href="https://docs.jsonata.org/overview.html">JSONAta expression</a> to format the metrics and display the metrics in a table using the following example of YAML code:</p>
</div>
<div class="listingblock">
<div class="title">Example YAML to show metrics in a table</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">datasets:
  - uuid: swf_metrics
    url: http://localhost:8080/q/metrics
    expression: &gt;-
        $map($, function($l) {
                [
                    $l[0],
                    $contains($l[1], "process_id") ?
                                            $replace($match($l[1], /process_id=".*?"/).match,
                                            "process_id",
                                            "workflow") :
                                            $l[1],
                    $l[2] = "NaN" ? -1 : $l[2]
                ]
            }
        )
pages:
    - components:
        - settings:
            lookup:
               uuid: swf_metrics</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/integrations/dashbuilder-metrics-table.png" alt="dashbuilder metrics table">
</div>
<div class="title">Figure 2. Example metrics in a table</div>
</div>
</div>
</div>
</li>
<li>
<p>To extract a specific information from your workflow, use specific metrics. Metrics related to workflows include:</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><code>kogito_process_instance_completed_total</code>: Completed workflows</p>
</li>
<li>
<p><code>kogito_process_instance_started_total</code>: Started workflows</p>
</li>
<li>
<p><code>kogito_process_instance_running_total</code>: Running workflows</p>
</li>
<li>
<p><code>kogito_process_instance_duration_seconds_sum</code>: Workflows total duration</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you display the metrics, you can filter the data to include the specific metrics. You can use the <strong>metrics</strong> and <strong>bar chart</strong> components in dashbuilder to display the specific metrics and after filtering the metrics, you can put the information in bar charts as shown in the following example YAML code:</p>
</div>
<div class="listingblock">
<div class="title">Example YAML to display bar charts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">datasets:
  - uuid: metrics
    url: http://localhost:8080/q/metrics
    expression: &gt;-
        $map($, function($l) {
                [
                    $l[0],
                    $contains($l[1], "process_id") ?
                                            $replace($match($l[1], /process_id=".*?"/).match,
                                            "process_id",
                                            "workflow") :
                                            $l[1],
                    $l[2] = "NaN" ? -1 : $l[2]
                ]
            }
        )
    columns:
      - id: metric
        type: label
      - id: labels
        type: label
      - id: value
        type: number
pages:
  - rows:
      - columns:
          - span: "6"
            components:
              - html: &gt;-
                  &lt;p style="font-size: large"&gt;Started &lt;/p&gt;
              - settings:
                  type: BARCHART
                  chart:
                    resizable: 'true'
                    width: '2000'
                  lookup:
                    uuid: metrics
                    sort:
                      - column: value
                        sortOrder: DESCENDING
                    filter:
                      - column: metric
                        function: EQUALS_TO
                        args:
                          - "kogito_process_instance_started_total"
                    group:
                      - columnGroup:
                          source: labels
                        groupFunctions:
                          - source: labels
                          - source: value
          - span: "6"
            components:
              - html: &gt;-
                  &lt;p style="font-size: large"&gt;Running &lt;/p&gt;
              - settings:
                  type: BARCHART
                  chart:
                    resizable: 'true'
                    width: '2000'
                  lookup:
                    uuid: metrics
                    sort:
                      - column: value
                        sortOrder: DESCENDING
                    filter:
                      - column: metric
                        function: EQUALS_TO
                        args:
                          - "kogito_process_instance_running_total"
                    group:
                      - columnGroup:
                          source: labels
                        groupFunctions:
                          - source: labels
                          - source: value
      - columns:
          - span: "6"
            components:
              - html: &gt;-
                  &lt;p style="font-size: large"&gt;Completed &lt;/p&gt;
              - settings:
                  type: BARCHART
                  chart:
                    resizable: 'true'
                    width: '2000'
                  dataSetLookup:
                    uuid: metrics
                    sort:
                      - column: value
                        sortOrder: DESCENDING
                    filter:
                      - column: metric
                        function: EQUALS_TO
                        args:
                          - "kogito_process_instance_completed_total"
                    group:
                      - columnGroup:
                          source: labels
                        groupFunctions:
                          - source: labels
                          - source: value
          - span: "6"
            components:
              - html: &gt;-
                  &lt;p style="font-size: large"&gt;Total Duration &lt;/p&gt;
              - settings:
                  type: BARCHART
                  chart:
                    resizable: 'true'
                    width: '2000'
                  lookup:
                    uuid: metrics
                    sort:
                      - column: value
                        sortOrder: DESCENDING
                    filter:
                      - column: metric
                        function: EQUALS_TO
                        args:
                          - "kogito_process_instance_duration_seconds_sum"
                    group:
                      - columnGroup:
                          source: labels
                        groupFunctions:
                          - source: labels
                          - source: value</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/integrations/dashbuilder-workflows-metrics-dashboard.png" alt="dashbuilder workflows metrics dashboard">
</div>
<div class="title">Figure 3. Example workflow metrics dashboard</div>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you are using Prometheus, you can use PROMQL with Prometheus REST API and transform the result to JSON format that is supported by dashbuilder to build the dashoards.</p>
</div>
<div class="paragraph">
<p>For more information about dashbuilder and Prometheus, see <a href="https://blog.kie.org/2022/07/creating-prometheus-dashboards-using-dashbuilder.html">Creating Prometheus Dashboards using Dashbuilder</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="proc-sw-dashboard-data-index"><a class="anchor" href="#proc-sw-dashboard-data-index"></a>Building dashboards using Data Index</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Data Index is a service that contains all the data related to the execution of your workflow. The Data Index service is available during the development mode. By default, you can access the Data Index at <code><a href="http://localhost:8180" class="bare">localhost:8180</a></code>.</p>
</div>
<div class="paragraph">
<p>The Data Index service uses GraphQL, so that dashbuilder can connect with the service using its REST API and transform the result to the supported format.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A workflow application is created.</p>
<div class="paragraph">
<p>For more information about creating a workflow, see <a href="../getting-started/create-your-first-workflow-service.html" class="xref page">Creating your first workflow service</a>.</p>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Go to the Data Index GraphQL interface (default to <code><a href="http://localhost:8180/graphiql" class="bare">localhost:8180/graphiql</a></code>) and test your query.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The following is an example of GraphQL query that lists all the workflows:</p>
</div>
<div class="listingblock">
<div class="title">Example GraphQL query to retrieve all workflows</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  ProcessInstances {
    processId
    processName
    state
    start
    end
    businessKey
    error {message}
  }
}</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Run the GraphQL query.</p>
<div class="paragraph">
<p>When you run the query, note that the URL is modified to includes the query.</p>
</div>
</li>
<li>
<p>Copy the URL and modify <code>graphiql</code> to <code>graphql</code>.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When you access the URL with <code>graphql</code>, it returns the result in a JSON format as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="title">GraphQL JSON result when using the query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "data": {
    "ProcessInstances": [
      {
        "processId": "yamlgreet",
        "processName": "Greeting workflow",
        "state": "COMPLETED",
        "start": "2022-07-01T16:08:12.038Z",
        "end": "2022-07-01T16:08:12.061Z",
        "businessKey": null,
        "error": null
      },
    ]
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Internally, workflows are referenced as processes, therefore the <code>processId</code> is the workflow ID and <code>processName</code> is the workflow name.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>Transform the response to the transform expression.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When you transform the response, note that the response includes the columns metdata for the data set.</p>
</div>
<div class="listingblock">
<div class="title">Example transform expression to retrieve fields from JSON response</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "columns" :[
        {"id": "Workflow Id", "type": "label"},
        {"id": "Workflow Name", "type": "label"},
        {"id": "State", "type": "label"},
        {"id": "Start", "type": "label"},
        {"id": "End", "type": "label"},
        {"id": "Business Key", "type": "label"},
        {"id": "Error", "type": "label"}
    ],
    "values" : $.data.ProcessInstances.[ processId, processName, state, start, end, businessKey ? businessKey : "", error ? error.message : ""]
}</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Create your dashboard using the transform expression and the URL mentioned in the previous step.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="title">Example dashboard created using Data Index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">datasets:
    - uuid: workflows
      url: http://localhost:8180/graphql/?query=%7BProcessInstances%7BprocessId%20processName%20state%20start%20end%20businessKey%20error%7Bmessage%7D%7D%7D%0A
      expression: &gt;-
            {
                "columns" :[
                    {"id": "Workflow Id", "type": "label"},
                    {"id": "Workflow Name", "type": "label"},
                    {"id": "State", "type": "label"},
                    {"id": "Start", "type": "label"},
                    {"id": "End", "type": "label"},
                    {"id": "Business Key", "type": "label"},
                    {"id": "Error", "type": "label"}
                ],
                "values" : $.data.ProcessInstances.[ processId, processName, state, start, end, businessKey ? businessKey : "", error ? error.message : ""]
            }
pages:
    - components:
        - settings:
            type: BARCHART
            lookup:
                uuid: workflows
                group:
                    - columnGroup:
                        source: State
                      functions:
                          - source: State
                          - source: State
                            function: COUNT
        - settings:
            lookup:
                uuid: workflows</code></pre>
</div>
</div>
<div class="paragraph">
<p>The previous example of dashboard contains bar chart that counts the workflow instances by <code>State</code> and lists all the dashboards in a table.</p>
</div>
<div class="paragraph">
<p>Following is the graphical dashboard resulted from the previous example:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/integrations/data-index-workflow-list-report.png" alt="data index workflow list report">
</div>
<div class="title">Figure 4. Example dashboard created using Data Index</div>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more examples of dashboards, see <a href="https://www.dashbuilder.org">Dashbuilder</a> website.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_resources"><a class="anchor" href="#_additional_resources"></a>Additional resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="../getting-started/create-your-first-workflow-service.html" class="xref page">Creating your first workflow service</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_found_an_issue"><a class="anchor" href="#_found_an_issue"></a><em><strong>Found an issue?</strong></em></h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you find an issue or any misleading information, please feel free to report it <a href="https://github.com/kiegroup/kogito-docs/issues/new">here</a>.
We really appreciate it!</p>
</div>
</div>
</div>
</article>
        </main>
            </div>
  </div>
</div><footer class="footer">
  <p>Adapted from Antora default UI, (c) 2019</p>
</footer>
<script src="../../../../_/js/site.js"></script>
<script src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/tabsBehavior.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
